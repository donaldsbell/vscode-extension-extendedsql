{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"scopeName": "source.extendedsql",
	"name": "Extended SQL",
	"_comment": {
		"line1" :"# Order matters!!!!",
		"line2": "Matches are performed in the order listed.",
		"line3": "TextMate considers lines of a document one at a time, looking within each one for matches.",
		"line4": "When we make a match, thatâ€™s the end for everything in that line up to that point.",
		"line5": "Thus, you can effectively make conditional rules by judicious ordering of a patterns array." },
	"patterns": [
		{
			"include": "#comments"
		},
		{
			"include": "#keywords"
		},
		{
			"include": "#operators"
		},
		{
			"include": "#functions"
		},
		{
			"include": "#constants"
		},
		{
			"include": "#strings"
		},
		{
			"include": "#numbers"
		},
		{
			"include": "#identifiers"
		}
	],
	"repository": {
		"comments": {
			"patterns": [
				{
					"name": "comment.line.double-dash.esql",
					"match": "--.*$"
				},
				{
					"name": "comment.block.esql",
					"begin": "/\\*",
					"end": "\\*/",
					"patterns": [
						{
							"name": "comment.block.esql",
							"match": "."
						}
					]
				}
			]
		},
		"keywords": {
			"patterns": [
				{
					"comment": "https://www.ibm.com/docs/en/app-connect/12.0.x?topic=statements-create-statement",
					"name": "keyword.declaration.create.esql",
					"match": "\\b(?i)CREATE\\b"
				},
				{
					"name": "keyword.other.declaration.qualifier.esql",
					"match": "\\b(?i)(FIELD|OF)\\b"
				},
				{
					"name": "keyword.other.declaration.as.esql",
					"match": "\\b(?i)AS\\b"
				},
				{
					"name": "keyword.other.declaration.domain.esql",
					"match": "\\b(?i)DOMAIN\\b"
				},
				{
					"name": "keyword.other.declaration.value.esql",
					"match": "\\b(?i)VALUE\\b"
				},
				{
					"name": "keyword.other.declaration.name.esql",
					"match": "\\b(?i)(TYPE|NAMESPACE|NAME|IDENTITY)\\b"
				},
				{
					"name": "keyword.other.declaration.from.esql",
					"match": "\\b(?i)FROM\\b"
				},
				{
					"name": "keyword.other.declaration.parse.esql",
					"match": "\\b(?i)(PARSE|ENCODING|CCSID|SET|TYPE|FORMAT)\\b"
				},
				{
					"name": "keyword.other.declaration.options.esql",
					"match": "\\b(?i)OPTIONS\\b"
				},
				{
					"comment": "https://www.ibm.com/docs/en/app-connect/12.0.x?topic=statements-create-module-statement",
					"name": "keyword.declaration.module.esql",
					"match": "\\b(?i)(COMPUTE|DATABASE|FILTER|DATABASEEVENT|MODULE)\\b"
				},
				{
					"name": "keyword.declaration.module.end.esql",
					"match": "\\b(?i)END\\s+MODULE\\b"
				},
				{
					"comment": "https://www.ibm.com/docs/en/app-connect/12.0.x?topic=statements-create-function-statement",
					"name": "keyword.declaration.routine.esql",
					"match": "\\b(?i)(FUNCTION|PROCEDURE)\\b"
				},
				{
					"name": "keyword.control.esql",
					"match": "\\b(?i)(BEGIN|END|IF|THEN|ELSE|WHILE|DO|FOR|CALL|RETURN)\\b"
				},
				{
					"name": "punctuation.terminator.statement.esql",
					"match": ";"
				}
			]
		},
		"operators": {
			"patterns": [
				{
					"name": "keyword.operator.logical.esql",
					"match": "\\b(?i)(AND|OR|NOT|IN|LIKE|RLIKE|IS|NULL)\\b"
				},
				{
					"name": "keyword.operator.comparison.complex.esql",
					"match": "\\b(?i)BETWEEN\\b"
				},
				{
					"name": "keyword.operator.comparison.esql",
					"match": "(==|!=|<=|>=|<|>)"
				},
				{
					"name": "keyword.operator.arithmetic.esql",
					"match": "(\\+|\\-|\\*|\\/|%)"
				},
				{
					"comment": "|| string concatenation operator",
					"name": "keyword.operator.string.esql",
					"match": "(\\|\\||%)"
				},
				{
					"name": "keyword.operator.assignment.esql",
					"match": "="
				},
				{
					"name": "keyword.control.assignment.esql",
					"match": "\\b(?i)(SET|MOVE)\\b"
				},
				{
					"name": "keyword.control.assignment.field.esql",
					"match": "\\b(?i)(PREVIOUSSIBLING|NEXTSIBLING|FIRSTCHILD|LASTCHILD)\\b"
				}
			]
		},
		"functions": {
			"patterns": [
				{
					"name": "entity.name.function.esql",
					"match": "\\b(?i)(abs|acos|asin|atan|atan2|ceil|cos|cosh|exp|floor|log|log10|pow|round|sin|sinh|sqrt|tan|tanh|max|min|avg|count|sum|concat|length|ltrim|rtrim|substring|trim|upper|lower|split|to_string|to_int|to_long|to_double|to_boolean|to_datetime|date_format|date_parse|now|bucket|case|coalesce|greatest|least|if|isnull|mv_avg|mv_concat|mv_count|mv_dedupe|mv_first|mv_last|mv_max|mv_median|mv_min|mv_sort|mv_sum|mv_zip|st_contains|st_disjoint|st_intersects|st_within|st_x|st_y)\\b"
				},
				{
					"comment": "https://www.ibm.com/docs/en/app-connect/13.0.x?topic=functions-esql-database-state",
					"name": "keyword.function.database.esql",
					"match": "\\b(?i)(SQLCODE|SQLERRORTEXT|SQLNATIVEERROR|SQLSTATE)\\b"
				},
				{
					"comment": "https://www.ibm.com/docs/en/app-connect/13.0.x?topic=functions-esql-datetime",
					"name": "keyword.function.datetime.esql",
					"match": "\\b(?i)(EXTRACT|CURRENT_DATE|CURRENT_TIME|CURRENT_TIMESTAMP|CURRENT_GMTDATE|CURRENT_GMTTIME|CURRENT_GMTTIMESTAMP|LOCAL_TIMEZONE)\\b"
				},
				{
					"comment": "TODO NEXT: https://www.ibm.com/docs/en/app-connect/13.0.x?topic=functions-esql-opentelemetry",
					"name": "keyword.function.opentelemetry.esql",
					"match": "\\b(?i)(OTEL_CREATE_TRACER|OTEL)\\b"
				},
				{
					"name": "keyword.function.compare.esql",
					"match": "\\b(?i)(LASTMOVE)\\b"
				}
			]
		},
		"constants": {
			"patterns": [
				{
					"name": "constant.language.boolean.esql",
					"match": "\\b(?i)(TRUE|FALSE|UNKNOWN)\\b"
				},
				{
					"name": "constant.language.null.esql",
					"match": "\\b(?i)NULL\\b"
				},
				{
					"name": "constant.language.messagetree.esql",
					"match": "\\b(?i)(Environment|InputRoot|OutputRoot)\\b"
				},
				{
					"comment": "https://www.ibm.com/docs/en/app-connect/13.0.x?topic=reference-esql-constants",
					"name": "constant.language.parsers.esql",
					"match": "\\b(?i)(RootBitStream|FolderBitStream|ValidateContentAndValue|ValidateValue|ValidateContent|ValidateNone|ValidateException|ValidateExceptionList|ValidateLocalError|ValidateUserTrace|ParseComplete|ParseImmediate|ParseOnDemand|XMLNSC\\.BuildTreeUsingSchemaTypes|XMLNSC\\.MixedContentRetainAll|XMLNSC\\.CommentsRetainAll|XMLNSC\\.ProcessingInstructionsRetainAll)\\b"
				}
			]
		},
		"strings": {
			"patterns": [
				{
					"name": "string.quoted.double.esql",
					"begin": "\"",
					"end": "\"",
					"patterns": [
						{
							"name": "constant.character.escape.esql",
							"match": "\\\\."
						}
					]
				},
				{
					"name": "string.quoted.single.esql",
					"begin": "'",
					"end": "'",
					"patterns": [
						{
							"name": "constant.character.escape.esql",
							"match": "\\\\."
						}
					]
				},
				{
					"name": "string.quoted.backtick.esql",
					"begin": "`",
					"end": "`",
					"patterns": [
						{
							"name": "constant.character.escape.esql",
							"match": "\\\\."
						}
					]
				}
			]
		},
		"numbers": {
			"patterns": [
				{
					"name": "constant.numeric.decimal.esql",
					"match": "\\b\\d+\\.\\d+\\b"
				},
				{
					"name": "constant.numeric.integer.esql",
					"match": "\\b\\d+\\b"
				}
			]
		},
		"identifiers": {
			"patterns": [
				{
					"name": "entity.other.broker.schema.esql",
					"match": "\\b(?i)BROKER SCHEMA\\b"
				},
				{
					"name": "entity.other.path.esql",
					"match": "\\b(?i)PATH\\b"
				},
				{			
					"name": "keyword.other.declare.esql",
					"begin": "\\b(?i)DECLARE\\b",
					"end": ";",
					"patterns": [
						{
							"name": "keyword.other.declare.esql",
							"match": "\\b(?i)(SHARED|EXTERNAL)\\b"
						},
						{
							"name": "entity.name.type.boolean.esql",
							"match": "\\b(?i)BOOLEAN\\b"
						},
						{
							"name": "entity.name.type.datetime.esql",
							"match": "\\b(?i)(DATE|TIME|GMTTIME|TIMESTAMP|GMTTIMESTAMP|INTERVAL)\\b"
						},
						{
							"name": "entity.name.type.namespace.esql",
							"match": "\\b(?i)NAMESPACE\\b"
						},
						{
							"name": "entity.name.type.numeric.esql",
							"match": "\\b(?i)(DECIMAL|FLOAT|INTEGER)\\b"
						},
						{
							"name": "entity.name.type.reference.esql",
							"match": "\\b(?i)REFERENCE TO\\b"
						},
						{
							"name": "entity.name.type.row.esql",
							"match": "\\b(?i)ROW\b"
						},
						{
							"name": "entity.name.type.string.esql",
							"match": "\\b(?i)(BIT|BLOB|CHAR|CHARACTER)\\b"
						},
						{
							"comment": "This include was required even though constants are higher in the file",
							"include": "#constants"
						},
						{
							"include": "#variables"
						}
					]
				},
				{
					"include": "#variables"
				}
			]
		},
		"variables": {
			"patterns": [
				{
					"name": "variable.other.esql",
					"match": "\\b[a-zA-Z_][a-zA-Z0-9_]*\\b"
				}
			]
		}
	}
}